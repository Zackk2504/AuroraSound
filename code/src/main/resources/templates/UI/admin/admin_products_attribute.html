<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Thuộc tính sản phẩm - TaiNghePro Admin</title>
    <link rel="shortcut icon" href="templates/img/icon.png" type="image/x-icon">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <link rel="stylesheet" href="templates/css/style.css">
    <style>
        /* Custom styles for Admin Dashboard (copied for consistency) */
        body {
            background-color: #f8f9fa;
        }
        #wrapper {
            display: flex;
            width: 100%;
            min-height: 100vh;
        }
        #sidebar-wrapper {
            min-width: 250px;
            max-width: 250px;
            background-color: #343a40;
            color: rgba(255, 255, 255, 0.8);
            transition: margin .25s ease-out;
            box-shadow: 2px 0 5px rgba(0,0,0,0.1);
        }
        #sidebar-wrapper .sidebar-heading {
            padding: 1.5rem 1rem;
            font-size: 1.2rem;
            font-weight: bold;
            color: #ffffff;
            border-bottom: 1px solid rgba(255,255,255,.1);
        }
        #sidebar-wrapper .list-group {
            width: 100%;
        }
        #sidebar-wrapper .list-group-item {
            background-color: transparent;
            color: rgba(255, 255, 255, 0.7);
            border: none;
            padding: 0.8rem 1.5rem;
            transition: all 0.3s ease;
        }
        #sidebar-wrapper .list-group-item:hover,
        #sidebar-wrapper .list-group-item.active {
            background-color: rgba(255, 255, 255, 0.1);
            color: #ffffff;
            border-left: 4px solid #007bff;
            padding-left: 1.3rem;
        }
        #page-content-wrapper {
            width: 100%;
            overflow-x: hidden;
        }
        .navbar-admin {
            border-bottom: 1px solid #dee2e6;
            background-color: #ffffff;
        }

        /* Specific styles for Product Attributes Page */
        .attribute-status-badge {
            min-width: 70px;
            text-align: center;
        }
        /* Style for value list within modal */
        .value-list-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.5rem 0;
            border-bottom: 1px dashed #eee;
        }
        .value-list-item:last-child {
            border-bottom: none;
        }
    </style>
</head>

<body>
        <div class="d-flex" id="wrapper">
        <div class="bg-dark border-right" id="sidebar-wrapper">
             <div class="sidebar-heading">
                <i class="bi bi-speedometer me-2"></i>
                <img src="/templates/img/LogoAuRRoRa.png" alt="" width="200px">
            </div>
            <div class="list-group list-group-flush">
                <a href="admin_dashboard.html" class="list-group-item list-group-item-action active">
                    <i class="bi bi-grid-1x2-fill me-2"></i> Dashboard
                </a>
                <a href="admin_products.html" class="list-group-item list-group-item-action">
                    <i class="bi bi-headset me-2"></i> Quản lý Sản phẩm
                </a>
                <a href="admin_orders.html" class="list-group-item list-group-item-action">
                    <i class="bi bi-receipt-cutoff me-2"></i> Quản lý Đơn hàng
                </a>
                <a href="admin_pos.html" class="list-group-item list-group-item-action">
                    <i class="bi bi-shop-window me-2"></i> Bán hàng tại quầy
                </a>
                <a href="admin_users.html" class="list-group-item list-group-item-action">
                    <i class="bi bi-people-fill me-2"></i> Quản lý Người dùng
                </a>
                <a href="admin_news.html" class="list-group-item list-group-item-action">
                    <i class="bi bi-newspaper me-2"></i> Quản lý Tin tức
                </a>
                <a href="admin_brands.html" class="list-group-item list-group-item-action">
                    <i class="bi bi-award-fill me-2"></i> Quản lý Thương hiệu
                </a>
                <a href="#settingsSubmenu" data-bs-toggle="collapse" aria-expanded="false" class="list-group-item list-group-item-action dropdown-toggle">
                    <i class="bi bi-gear-fill me-2"></i> Cài đặt hệ thống
                </a>
                <div class="collapse" id="settingsSubmenu">
                    <a href="admin_settings_product_attributes.html" class="list-group-item list-group-item-action ps-5 active">
                        <i class="bi bi-tags-fill me-2"></i> Thuộc tính sản phẩm
                    </a>
                    <a href="#" class="list-group-item list-group-item-action ps-5">
                        <i class="bi bi-sliders me-2"></i> Cấu hình chung
                    </a>
                    </div>
                <a href="admin_login.html" class="list-group-item list-group-item-action text-danger">
                    <i class="bi bi-box-arrow-right me-2"></i> Đăng xuất
                </a>
            </div>
        </div>
        <div id="page-content-wrapper">
            <nav class="navbar navbar-expand-lg navbar-light bg-light border-bottom navbar-admin">
                <div class="container-fluid">
                    <button class="btn btn-primary" id="sidebarToggle"><i class="bi bi-list"></i></button>
                    <div class="ms-auto">
                        <span class="navbar-text me-3">
                            Chào mừng, <strong class="text-primary">Admin Name</strong>
                        </span>
                        <a href="admin_login.html" class="btn btn-outline-danger btn-sm">
                            <i class="bi bi-box-arrow-right"></i> Đăng xuất
                        </a>
                    </div>
                </div>
            </nav>

            <div class="container-fluid py-4">
                <h1 class="mt-4 mb-4">Dashboard</h1>

                <div class="row g-4">
                    <div class="col-lg-3 col-md-6">
                        <div class="card shadow-sm border-0 h-100">
                            <div class="card-body">
                                <div class="d-flex align-items-center">
                                    <div class="flex-shrink-0 me-3">
                                        <i class="bi bi-receipt-cutoff text-primary fs-2"></i>
                                    </div>
                                    <div class="flex-grow-1">
                                        <h6 class="text-muted text-uppercase mb-1">Tổng đơn hàng</h6>
                                        <h3 class="mb-0">1,234</h3>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-3 col-md-6">
                        <div class="card shadow-sm border-0 h-100">
                            <div class="card-body">
                                <div class="d-flex align-items-center">
                                    <div class="flex-shrink-0 me-3">
                                        <i class="bi bi-currency-dollar text-success fs-2"></i>
                                    </div>
                                    <div class="flex-grow-1">
                                        <h6 class="text-muted text-uppercase mb-1">Doanh thu</h6>
                                        <h3 class="mb-0">123.456.789 VNĐ</h3>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-3 col-md-6">
                        <div class="card shadow-sm border-0 h-100">
                            <div class="card-body">
                                <div class="d-flex align-items-center">
                                    <div class="flex-shrink-0 me-3">
                                        <i class="bi bi-headset text-info fs-2"></i>
                                    </div>
                                    <div class="flex-grow-1">
                                        <h6 class="text-muted text-uppercase mb-1">Tổng sản phẩm</h6>
                                        <h3 class="mb-0">500</h3>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-3 col-md-6">
                        <div class="card shadow-sm border-0 h-100">
                            <div class="card-body">
                                <div class="d-flex align-items-center">
                                    <div class="flex-shrink-0 me-3">
                                        <i class="bi bi-people-fill text-warning fs-2"></i>
                                    </div>
                                    <div class="flex-grow-1">
                                        <h6 class="text-muted text-uppercase mb-1">Tổng người dùng</h6>
                                        <h3 class="mb-0">10,000</h3>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="card shadow-sm mt-5 mb-4">
                    <div class="card-header bg-primary text-white">
                        <h5 class="mb-0"><i class="bi bi-clock-history me-2"></i> Đơn hàng gần đây</h5>
                    </div>
                    <div class="card-body">
                        <div class="table-responsive">
                            <table class="table table-hover align-middle">
                                <thead>
                                    <tr>
                                        <th scope="col">Mã ĐH</th>
                                        <th scope="col">Khách hàng</th>
                                        <th scope="col">Ngày đặt</th>
                                        <th scope="col">Tổng tiền</th>
                                        <th scope="col">Trạng thái</th>
                                        <th scope="col">Hành động</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>#DH00128</td>
                                        <td>Nguyễn Thị D</td>
                                        <td>26/06/2025</td>
                                        <td>3.500.000 VNĐ</td>
                                        <td><span class="badge bg-warning text-dark">Chờ xác nhận</span></td>
                                        <td><a href="#" class="btn btn-sm btn-outline-info">Xem</a></td>
                                    </tr>
                                    <tr>
                                        <td>#DH00127</td>
                                        <td>Trần Văn E</td>
                                        <td>25/06/2025</td>
                                        <td>1.200.000 VNĐ</td>
                                        <td><span class="badge bg-primary">Đang xử lý</span></td>
                                        <td><a href="#" class="btn btn-sm btn-outline-info">Xem</a></td>
                                    </tr>
                                    <tr>
                                        <td>#DH00126</td>
                                        <td>Phạm Thu F</td>
                                        <td>24/06/2025</td>
                                        <td>800.000 VNĐ</td>
                                        <td><span class="badge bg-success">Đã giao</span></td>
                                        <td><a href="#" class="btn btn-sm btn-outline-info">Xem</a></td>
                                    </tr>
                                    </tbody>
                            </table>
                        </div>
                        <div class="text-end">
                            <a href="admin_orders.html" class="btn btn-outline-primary btn-sm">Xem tất cả đơn hàng</a>
                        </div>
                    </div>
                </div>

                <div class="card shadow-sm mt-4 mb-4">
                    <div class="card-header bg-primary text-white">
                        <h5 class="mb-0"><i class="bi bi-newspaper me-2"></i> Bài viết gần đây</h5>
                    </div>
                    <div class="card-body">
                        <div class="table-responsive">
                            <table class="table table-hover align-middle">
                                <thead>
                                    <tr>
                                        <th scope="col">ID</th>
                                        <th scope="col">Tiêu đề</th>
                                        <th scope="col">Ngày đăng</th>
                                        <th scope="col">Trạng thái</th>
                                        <th scope="col">Hành động</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>1</td>
                                        <td>Review Tai nghe Gaming XYZ</td>
                                        <td>25/06/2025</td>
                                        <td><span class="badge bg-success">Đã xuất bản</span></td>
                                        <td><a href="#" class="btn btn-sm btn-outline-info">Sửa</a></td>
                                    </tr>
                                    <tr>
                                        <td>2</td>
                                        <td>Top 5 tai nghe không dây đáng mua</td>
                                        <td>20/06/2025</td>
                                        <td><span class="badge bg-warning text-dark">Bản nháp</span></td>
                                        <td><a href="#" class="btn btn-sm btn-outline-info">Sửa</a></td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        <div class="text-end">
                            <a href="admin_news.html" class="btn btn-outline-primary btn-sm">Xem tất cả tin tức</a>
                        </div>
                    </div>
                </div>

            </div>
        </div>
        </div>
    <div class="modal fade" id="attributeTypeFormModal" tabindex="-1" aria-labelledby="attributeTypeFormModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-md modal-dialog-centered modal-dialog-scrollable">
            <div class="modal-content">
                <div class="modal-header bg-primary text-white">
                    <h5 class="modal-title" id="attributeTypeFormModalLabel"><i class="bi bi-tags-fill me-2"></i> <span id="modalTypeFormTitle">Thêm Loại Thuộc tính mới</span></h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="attributeTypeForm">
                        <input type="hidden" id="attributeTypeId" value=""> <div class="mb-3">
                            <label for="attributeTypeName" class="form-label">Tên loại thuộc tính <span class="text-danger">*</span></label>
                            <input type="text" class="form-control" id="attributeTypeName" placeholder="Ví dụ: Màu sắc, Kết nối" required>
                        </div>
                        <div class="mb-3">
                            <label for="attributeTypeStatus" class="form-label">Trạng thái <span class="text-danger">*</span></label>
                            <select class="form-select" id="attributeTypeStatus" required>
                                <option value="active" selected>Hoạt động</option>
                                <option value="inactive">Không hoạt động</option>
                            </select>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal"><i class="bi bi-x-circle me-2"></i> Hủy</button>
                    <button type="submit" form="attributeTypeForm" class="btn btn-success"><i class="bi bi-save me-2"></i> Lưu Loại Thuộc tính</button>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="attributeValuesModal" tabindex="-1" aria-labelledby="attributeValuesModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg modal-dialog-centered modal-dialog-scrollable">
            <div class="modal-content">
                <div class="modal-header bg-info text-white">
                    <h5 class="modal-title" id="attributeValuesModalLabel">
                        <i class="bi bi-list-check me-2"></i> Quản lý Giá trị cho <span id="valuesModalAttributeTypeName"></span>
                    </h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <input type="hidden" id="currentAttributeTypeId" value=""> <div class="mb-3 p-3 border rounded bg-light">
                        <h6>Thêm/Sửa Giá trị</h6>
                        <div class="input-group">
                            <input type="hidden" id="attributeValueId" value="">
                            <input type="text" class="form-control" id="attributeValueName" placeholder="Nhập giá trị mới (ví dụ: Đen)">
                            <button class="btn btn-primary" type="button" id="addUpdateValueBtn"><i class="bi bi-plus-circle me-1"></i> Thêm/Cập nhật</button>
                        </div>
                    </div>

                    <h6 class="mt-4 mb-2">Danh sách Giá trị hiện có:</h6>
                    <div id="attributeValuesList" class="list-group">
                        <div class="text-center text-muted py-3" id="noValuesMessage">Chưa có giá trị nào.</div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal"><i class="bi bi-x-circle me-2"></i> Đóng</button>
                </div>
            </div>
        </div>
    </div>


    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
        crossorigin="anonymous"></script>
    <script>
        // Toggle the sidebar (copied for consistency)
        document.getElementById("sidebarToggle").addEventListener("click", function() {
            document.getElementById("wrapper").classList.toggle("toggled");
        });

        // --- JavaScript for Attribute Type Modal ---
        document.addEventListener('DOMContentLoaded', function() {
            const attributeTypeFormModal = document.getElementById('attributeTypeFormModal');
            attributeTypeFormModal.addEventListener('show.bs.modal', function (event) {
                const button = event.relatedTarget; // Button that triggered the modal
                const attributeTypeId = button.getAttribute('data-attribute-type-id'); // Get attribute Type ID if editing

                const modalTypeFormTitle = document.getElementById('modalTypeFormTitle');
                const attributeTypeIdInput = document.getElementById('attributeTypeId');
                const attributeTypeNameInput = document.getElementById('attributeTypeName');
                const attributeTypeStatusInput = document.getElementById('attributeTypeStatus');
                
                // Reset form fields
                document.getElementById('attributeTypeForm').reset();
                attributeTypeIdInput.value = '';

                if (attributeTypeId) { // Edit mode for Attribute Type
                    modalTypeFormTitle.textContent = 'Chỉnh sửa Loại Thuộc tính';
                    // Populate form with example data for specific attributeTypeId
                    if (attributeTypeId === '1') {
                        attributeTypeIdInput.value = '1';
                        attributeTypeNameInput.value = 'Màu sắc';
                        attributeTypeStatusInput.value = 'active';
                    } else if (attributeTypeId === '2') {
                        attributeTypeIdInput.value = '2';
                        attributeTypeNameInput.value = 'Kết nối';
                        attributeTypeStatusInput.value = 'active';
                    } else if (attributeTypeId === '3') {
                        attributeTypeIdInput.value = '3';
                        attributeTypeNameInput.value = 'Tính năng đặc biệt';
                        attributeTypeStatusInput.value = 'active';
                    }
                    // Add more conditions for other attribute Type IDs
                } else { // Add mode for Attribute Type
                    modalTypeFormTitle.textContent = 'Thêm Loại Thuộc tính mới';
                }
            });
        });

        // --- JavaScript for Attribute Values Modal ---
        document.addEventListener('DOMContentLoaded', function() {
            const attributeValuesModal = document.getElementById('attributeValuesModal');
            const valuesModalAttributeTypeName = document.getElementById('valuesModalAttributeTypeName');
            const currentAttributeTypeIdInput = document.getElementById('currentAttributeTypeId');
            const attributeValuesList = document.getElementById('attributeValuesList');
            const noValuesMessage = document.getElementById('noValuesMessage');
            const attributeValueIdInput = document.getElementById('attributeValueId');
            const attributeValueNameInput = document.getElementById('attributeValueName');
            const addUpdateValueBtn = document.getElementById('addUpdateValueBtn');

            // Dummy data for attribute values (in a real app, this would come from an API)
            const allAttributeValues = {
                '1': [ // Values for Attribute Type ID 1 (Màu sắc)
                    { id: '101', name: 'Đen' },
                    { id: '102', name: 'Trắng' },
                    { id: '103', name: 'Xám' },
                    { id: '104', name: 'Xanh' }
                ],
                '2': [ // Values for Attribute Type ID 2 (Kết nối)
                    { id: '201', name: 'Bluetooth' },
                    { id: '202', name: 'Có dây' },
                    { id: '203', name: 'USB' }
                ],
                '3': [ // Values for Attribute Type ID 3 (Tính năng đặc biệt)
                    { id: '301', name: 'Chống ồn chủ động' },
                    { id: '302', name: 'Âm thanh vòm' },
                    { id: '303', name: 'Mic tháo rời' }
                ]
            };

            function renderAttributeValues(attributeTypeId) {
                attributeValuesList.innerHTML = ''; // Clear previous values
                const values = allAttributeValues[attributeTypeId] || [];

                if (values.length === 0) {
                    noValuesMessage.style.display = 'block';
                } else {
                    noValuesMessage.style.display = 'none';
                    values.forEach(value => {
                        const listItem = document.createElement('div');
                        listItem.classList.add('value-list-item', 'list-group-item');
                        listItem.innerHTML = `
                            <span>${value.name}</span>
                            <div>
                                <button class="btn btn-sm btn-warning text-dark me-1 edit-value-btn" data-value-id="${value.id}" data-value-name="${value.name}" title="Sửa giá trị">
                                    <i class="bi bi-pencil"></i>
                                </button>
                                <button class="btn btn-sm btn-danger delete-value-btn" data-value-id="${value.id}" title="Xóa giá trị">
                                    <i class="bi bi-trash"></i>
                                </button>
                            </div>
                        `;
                        attributeValuesList.appendChild(listItem);
                    });
                }
            }

            attributeValuesModal.addEventListener('show.bs.modal', function (event) {
                const button = event.relatedTarget; // Button that triggered the modal
                const attributeTypeId = button.getAttribute('data-attribute-type-id');
                const attributeTypeName = button.getAttribute('data-attribute-type-name');

                valuesModalAttributeTypeName.textContent = attributeTypeName;
                currentAttributeTypeIdInput.value = attributeTypeId;
                
                // Reset add/edit value form
                attributeValueIdInput.value = '';
                attributeValueNameInput.value = '';
                addUpdateValueBtn.innerHTML = '<i class="bi bi-plus-circle me-1"></i> Thêm/Cập nhật';

                renderAttributeValues(attributeTypeId);
            });

            // Handle Add/Update Value button click
            addUpdateValueBtn.addEventListener('click', function() {
                const typeId = currentAttributeTypeIdInput.value;
                const valueId = attributeValueIdInput.value;
                const valueName = attributeValueNameInput.value.trim();

                if (!valueName) {
                    alert('Tên giá trị không được để trống!');
                    return;
                }

                if (!allAttributeValues[typeId]) {
                    allAttributeValues[typeId] = [];
                }

                if (valueId) { // Update existing value
                    const index = allAttributeValues[typeId].findIndex(v => v.id === valueId);
                    if (index !== -1) {
                        allAttributeValues[typeId][index].name = valueName;
                    }
                } else { // Add new value
                    const newId = Date.now().toString(); // Simple unique ID for example
                    allAttributeValues[typeId].push({ id: newId, name: valueName });
                }

                attributeValueIdInput.value = '';
                attributeValueNameInput.value = '';
                addUpdateValueBtn.innerHTML = '<i class="bi bi-plus-circle me-1"></i> Thêm/Cập nhật';
                renderAttributeValues(typeId);
            });

            // Handle Edit Value button click (delegation for dynamically added buttons)
            attributeValuesList.addEventListener('click', function(event) {
                if (event.target.closest('.edit-value-btn')) {
                    const editButton = event.target.closest('.edit-value-btn');
                    const valueId = editButton.getAttribute('data-value-id');
                    const valueName = editButton.getAttribute('data-value-name');
                    
                    attributeValueIdInput.value = valueId;
                    attributeValueNameInput.value = valueName;
                    addUpdateValueBtn.innerHTML = '<i class="bi bi-arrow-clockwise me-1"></i> Cập nhật';
                } else if (event.target.closest('.delete-value-btn')) {
                    const deleteButton = event.target.closest('.delete-value-btn');
                    const valueId = deleteButton.getAttribute('data-value-id');
                    const typeId = currentAttributeTypeIdInput.value;

                    if (confirm('Bạn có chắc chắn muốn xóa giá trị này?')) {
                        allAttributeValues[typeId] = allAttributeValues[typeId].filter(v => v.id !== valueId);
                        renderAttributeValues(typeId);
                    }
                }
            });
        });
    </script>
</body>

</html>