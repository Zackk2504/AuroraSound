<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">


<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title layout:title-pattern="$LAYOUT_TITLE - Trang chủ">Trang chủ</title>
<!--    <link rel="shortcut icon" href="templates/img/icon.png" type="image/x-icon">-->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <link rel="stylesheet" href="templates/css/style.css">
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <style>
        #bannerCarousel .carousel-inner {
            height: 700px; /* hoặc 500px tùy theo bạn muốn */
            justify-content: center;
        }

        #bannerCarousel .carousel-item img {
            height: 100%;
            width: 100%;
            object-fit: cover;
        }

        .about-us {
            max-width: 1000px;
            margin: 50px auto;
            padding: 20px;
            text-align: center;
            font-family: Arial, sans-serif;
        }

        .about-us h2 {
            font-size: 36px;
            font-weight: bold;
            color: #ff6600; /* màu nổi bật */
            margin-bottom: 10px;
        }

        .divider {
            border: none;
            height: 2px;
            background-color: #ff6600; /* màu giống chữ */
            width: 100px;
            margin: 0 auto 30px auto;
        }

        .about-content {
            display: flex;
            align-items: center;
            gap: 30px;
            text-align: left;
            flex-wrap: wrap;
        }

        .about-image img {
            max-width: 400px;
            width: 100%;
            border-radius: 10px;
        }

        .about-text {
            flex: 1;
            font-size: 18px;
            line-height: 1.6;
            color: #333;
        }

        .about-section {
            padding: 40px 0;
            background-color: #f9f9f9;
        }

        .about-section h2 {
            font-size: 2rem;
            color: #333;
            margin-bottom: 20px;
        }

        .about-section p {
            font-size: 1rem;
            color: #555;
            line-height: 1.6;
        }

        .about-section .img-fluid {
            max-width: 100%;
            height: auto;
        }


    </style>
</head>

<body>

<nav class="navbar navbar-expand-lg navbar-dark bg-dark shadow-sm">
    <div class="container">
        <a class="navbar-brand fw-bold text-primary" href="#">
            <img src="/images/image-removebg-preview.png" width="250px" alt="Logo TaiNghePro">
        </a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
                aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav ms-auto">
                <li class="nav-item">
                    <a class="nav-link active" aria-current="page" href="/">
                        <i class="bi bi-house-door"></i> Trang chủ
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="/khach-hang/san-pham">
                        <i class="bi bi-headset"></i> Sản phẩm
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="/khach-hang/Tra-cuu-don-hang">
                        <i class="bi bi-award"></i> Tra cứu đơn hàng
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#">
                        <i class="bi bi-newspaper"></i> Tin tức
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#">
                        <i class="bi bi-telephone"></i> Liên hệ
                    </a>
                </li>


                <li class="nav-item dropdown" sec:authorize="isAuthenticated()">
                    <a class="nav-link dropdown-toggle" href="#" id="userDropdown" role="button" data-bs-toggle="dropdown"
                       aria-expanded="false">
                        <i class="bi bi-person-circle"></i>
                        <span sec:authentication="name">Tài khoản</span>
                    </a>
                    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="userDropdown">
                        <li><a class="dropdown-item" href="/khach-hang/thong-tin">Thông tin cá nhân</a></li>
                        <form th:action="@{/khach-hang/logout}" method="post">
                            <button type="submit" class="dropdown-item">Đăng xuất</button>
                        </form>
                    </ul>
                </li>

                 Nếu chưa đăng nhập
                <li class="nav-item" sec:authorize="isAnonymous()">
                    <a class="nav-link" href="/login">
                        <i class="bi bi-person"></i> Đăng nhập
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="/khach-hang/gio-hang">
                        <i class="bi bi-cart"></i> Giỏ hàng
                        <span class="badge bg-danger"
                              id="badgeGioHang"
                              th:text="${slGioHang}"
                             >
                        </span>
                    </a>
                </li>
            </ul>
        </div>
    </div>
</nav>

<div class="bg-dark py-3 shadow-sm">
    <div class="container position-relative">
        <form class="d-flex w-50 mx-auto" onsubmit="return false;">
            <input id="searchBox" class="form-control me-2" type="search"
                   placeholder="Tìm kiếm tai nghe..." aria-label="Search">
            <button class="btn btn-outline-light" type="submit" title="Tìm kiếm">
                <i class="bi bi-search fs-5"></i>
            </button>
        </form>

        <!-- Kết quả search xổ xuống -->
        <ul id="suggestions"
            class="list-group position-absolute w-50 mx-auto"
            style="top: 60px; left: 25%; z-index: 1000;">
        </ul>
    </div>
</div>

<div class="p-4" layout:fragment="khachhangcontent">
    <!-- Nội dung cụ thể sẽ chèn vào đây -->
    <div id="bannerCarousel" class="carousel slide" data-bs-ride="carousel">
        <div class="carousel-inner">
            <div class="carousel-item active">
                <img src="/images/123.webp" class="d-block w-100" alt="Banner 1">
            </div>
            <div class="carousel-item">
                <img src="/images/download.webp" class="d-block w-100" alt="Banner 2">
            </div>
            <div class="carousel-item">
                <img src="/images/OIP.webp" class="d-block w-100" alt="Banner 3">
            </div>
        </div>

        <!-- Nút điều hướng -->
        <button class="carousel-control-prev" type="button" data-bs-target="#bannerCarousel" data-bs-slide="prev">
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Trước</span>
        </button>
        <button class="carousel-control-next" type="button" data-bs-target="#bannerCarousel" data-bs-slide="next">
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Tiếp</span>
        </button>
    </div>
    <section class="container mb-5">
        <h2 class="text-center mb-4 fw-bold">✨ Sản phẩm nổi bật ✨</h2>
        <div class="row g-4">
            <!-- Sản phẩm 1 -->
            <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6">
                <div th:each="sp : ${random}" class="border rounded shadow hover:shadow-lg overflow-hidden">
                    <!--                    <img th:src="@{${sp.sanPhamChiTietList[0].anh}}" alt="Ảnh sản phẩm" class="w-full h-48 object-cover"/>-->
                    <div class="p-4">
                        <img th:if="${mapAnhDau[sp.id] != null}"
                             th:src="@{${mapAnhDau[sp.id].url}}"
                             class="square-img"/>
                        <a th:href="@{'/khach-hang/san-pham/' + ${sp.id}}" class="block p-4 hover:bg-gray-100 rounded">
                            <h3 class="text-lg font-semibold" th:text="${sp.tenSanPham}">Tên sản phẩm</h3>
                            <!-- <p class="text-red-600 font-bold mt-2" th:text="${#numbers.formatDecimal(sp.sanPhamChiTietList[0].giaBan, 0, 'COMMA', '.', '') + ' đ'}">Giá</p> -->
                            <p class="text-blue-500 text-sm">Xem chi tiết</p>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <hr>
    <section class="about-us">
        <h2>Về Chúng Tôi</h2>
        <hr class="divider">
        <div class="about-content">
            <div class="about-image">
                <img src="/images/About-Us-PNG-Photos.png" alt="Thương hiệu tai nghe">
            </div>
            <div class="about-text">
                <p>
                    Chúng tôi là một thương hiệu tai nghe chuyên cung cấp các sản phẩm âm thanh chất lượng cao, với cam kết mang đến trải nghiệm âm nhạc tuyệt vời cho mọi người. Sản phẩm của chúng tôi được thiết kế để mang lại âm thanh sắc nét, bass mạnh mẽ và khả năng cách âm vượt trội.
                </p>
            </div>
        </div>
    </section>

    <!-- Cam kết và chất lượng -->
    <section class="about-us">
        <h2>Cam kết và chất lượng</h2>
        <hr class="divider">
        <div class="about-content">
            <div class="about-text">
                <p>
                    Chất lượng là yếu tố mà chúng tôi luôn đặt lên hàng đầu. Tất cả các sản phẩm tai nghe của chúng tôi đều trải qua quy trình kiểm tra nghiêm ngặt về âm thanh, độ bền và thiết kế để mang đến trải nghiệm tuyệt vời nhất cho người sử dụng. Chúng tôi cam kết chỉ cung cấp những sản phẩm đạt chuẩn cao nhất, giúp bạn tận hưởng âm nhạc một cách trọn vẹn nhất.
                </p>
            </div>
            <div class="about-image">
                <img src="/images/luu-y-khi-trinh-bay-mau-giay-cam-ket-chat-luong-san-pham.jpg" alt="Cam kết chất lượng">
            </div>
        </div>
    </section>



</div>


<footer class="bg-dark text-white-50 py-5">
    <div class="container">
        <div class="row">
            <div class="col-md-4 mb-4">
                <h5 class="text-white">Aurora Sound</h5>
                <p>Cửa hàng tai nghe uy tín hàng đầu Việt Nam. Mang đến trải nghiệm âm thanh tuyệt vời nhất cho bạn.
                </p>
            </div>
            <div class="col-md-3 mb-4">
                <h5 class="text-white">Liên kết nhanh</h5>
                <ul class="list-unstyled">
                    <li><a href="#" class="text-white-50 text-decoration-none">Trang chủ</a></li>
                    <li><a href="#" class="text-white-50 text-decoration-none">Sản phẩm</a></li>
                    <li><a href="#" class="text-white-50 text-decoration-none">Tin tức</a></li>
                    <li><a href="#" class="text-white-50 text-decoration-none">Liên hệ</a></li>
                </ul>
            </div>
            <div class="col-md-3 mb-4">
                <h5 class="text-white">Chính sách</h5>
                <ul class="list-unstyled">
                    <li><a href="#" class="text-white-50 text-decoration-none">Chính sách bảo mật</a></li>
                    <li><a href="#" class="text-white-50 text-decoration-none">Chính sách đổi trả</a></li>
                    <li><a href="#" class="text-white-50 text-decoration-none">Điều khoản dịch vụ</a></li>
                </ul>
            </div>
            <div class="col-md-2 mb-4">
                <h5 class="text-white">Theo dõi chúng tôi</h5>
                <a href="#" class="text-white-50 me-2"><i class="bi bi-facebook fs-4"></i></a>
                <a href="#" class="text-white-50 me-2"><i class="bi bi-instagram fs-4"></i></a>
                <a href="#" class="text-white-50"><i class="bi bi-youtube fs-4"></i></a>
            </div>
        </div>
        <div class="text-center pt-3 border-top border-secondary">
            <p class="mb-0">&copy; 2025 TaiNghePro. All rights reserved.</p>
        </div>
    </div>
</footer>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
        crossorigin="anonymous"></script>
<script src="js/script.js"></script>
<script>
    document.addEventListener('DOMContentLoaded', function () {
        if (document.getElementById('badgeGioHang')) {
            fetch('/khach-hang/gio-hang/so-luong')
                .then(res => res.json())
                .then(data => {
                    const badge = document.getElementById('badgeGioHang');
                    if (data > 0) {
                        badge.textContent = data;
                        badge.style.display = 'inline-block';
                    } else {
                        badge.style.display = 'none';
                    }
                });
        }
    });

    document.getElementById("searchBox").addEventListener("input", async function() {
        const keyword = this.value.trim();
        const suggestions = document.getElementById("suggestions");
        suggestions.innerHTML = "";

        if (keyword.length < 2) return; // chỉ search khi nhập >= 2 ký tự

        const res = await fetch(`/khach-hang/search?keyword=${encodeURIComponent(keyword)}`);
        const data = await res.json();

        data.forEach(sp => {
            const li = document.createElement("li");
            li.classList.add("list-group-item", "list-group-item-action");
            li.textContent = sp.ten;
            li.onclick = () => {
                window.location.href = `/khach-hang/san-pham/${sp.id}`;
            };
            suggestions.appendChild(li);
        });
    });
</script>

</body>

</html>